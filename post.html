<script type="text/javascript">
$(function() {
    $('{{ post.url }}').addClass('active');
});
</script>
<div class="container markdown-body" id="content-wrap">
    <div class="row">
        <div class="col-sm-9 blog-main">
            <div class="blog-post">
                <h2 class="blog-post-title">{{post.title}}</h2>
                <p class="blog-post-meta">{{ post.date }} {% if post.cats.@count %}&nbsp;posted in {% /if %} {% for cat in post.cats %}
                    <a class='category' href='{{ cat.url }}'>{{ cat.name }}</a>&nbsp; {% /for %} {% if post.cats.@count %} {% /if %}
                </p>
                <div class="content-responsive" id="post-content">
                    {{ post.content }}
                </div>
                <div class="content-responsive post-footer">
                    <blockquote>
                        转载请注明出处：<a href="{{ siteURL }}{{ post.url }}">{{ pageTitle }}</a>
                        <p>欢迎关注我的微信公众号：王肖Plus
                            <br><img src="media/15196482316286/qrcode_for_weixin_public_account.jpg">
                    </blockquote>
                    <blockquote>我的博客会及时同步到腾讯云+社区，邀请大家一同入驻：
                        <br><a href="https://cloud.tencent.com/developer/support-plan?invite_code=mqbbongvgxmp" target="__blank">https://cloud.tencent.com/developer/support-plan?invite_code=mqbbongvgxmp</a>
                    </blockquote>
                </div>
            </div>
            <!-- /.blog-post -->
            <div class="share-comment">
                {{ commentAndShareCode }}
            </div>
        </div>
        <!-- /.blog-main -->
        <!-- slider start -->
        <script type="text/javascript">
        $(function() {
            if ($.trim($('#toc').html()).length != 0) {
                return;
            }
            var reg = /<h(\d) id=\"(toc_\d{1,2})\">(.*?)<\/h\d>/g;
            var postStr = $.trim($('#post-content').html());
            var tocList = postStr.match(reg)
            $('#toc').html(func(tocList, 0, 1, ""));
        });

        function func(tocList, index, hn, tocHtml) {
            if (index > tocList.length - 1) {
                return tocHtml;
            }
            var reg = /<h(\d) id=\"toc_(\d{1,2})\">(.*?)<\/h\d>/g;
            var currToc = tocList[index];
            var currHn = currToc.replace(reg, "$1");
            var currId = currToc.replace(reg, "$2");
            var currText = currToc.replace(reg, "$3");
            var currLi = "<li><a href=\"#toc_" + currId + "\">" + currText + "</a></li>";
            if (currHn == hn) {
                tocHtml += currLi;
            } else if (currHn > hn) {
                for (var i = 0; i < currHn - hn; i++) {
                    tocHtml += "<ul>"
                }
                tocHtml += currLi;
            } else if (currHn < hn) {
                for (var i = 0; i < hn - currHn; i++) {
                    tocHtml += "</ul>"
                }
                tocHtml += currLi;
            }
            return func(tocList, index + 1, currHn, tocHtml);
        }
        </script>